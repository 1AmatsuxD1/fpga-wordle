# ЁЯФН DEBUG GUIDE - р╕кр╕╡р╕бр╣Ир╕зр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

## ЁЯУЛ **р╕нр╕▓р╕Бр╕▓р╕г:**
- р╕Ир╕нр╣Бр╕кр╕Фр╕Зр╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Др╕Фр╣Й
- р╣Бр╕Хр╣Ир╕кр╕╡р╣Ар╕Ыр╣Зр╕Щр╕бр╣Ир╕зр╕З (magenta) р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- р╣Др╕бр╣Ир╕бр╕╡р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з/р╣Ар╕лр╕ер╕╖р╕нр╕З

## ЁЯОп **р╕кр╕▓р╣Ар╕лр╕Хр╕╕:**
FPGA #1 р╣Др╕бр╣Ир╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕ер╕▒р╕Ър╕бр╕▓ р╕лр╕гр╕╖р╕нр╕кр╣Ир╕Зр╕бр╕▓р╣Бр╕Хр╣Ир╣Ар╕Ыр╣Зр╕Щ "000" (gray) р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

---

## тЬЕ **р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓:**

### **Step 1: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LED FPGA #1**

р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╕░р╕Ър╕нр╕Бр╕кр╕Цр╕▓р╕Щр╕░ LED:

```
FPGA #1:
L3 (Heartbeat): р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ър╕лр╕гр╕╖р╕нр╣Др╕бр╣И?  [    ]
L0 (data_valid): р╕Хр╕┤р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?     [    ]
L1 (word_received): р╕Хр╕┤р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?  [    ]
L2 (serial_rx_clk): р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ър╕лр╕гр╕╖р╕нр╣Др╕бр╣И? [    ]
```

**р╕Др╕зр╕▓р╕бр╕лр╕бр╕▓р╕в:**
- L3 р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ = FPGA #1 р╕Чр╕│р╕Зр╕▓р╕Щ тЬЕ
- L0 р╕Хр╕┤р╕Ф = FPGA #1 р╕гр╕▒р╕Ъ data_valid р╕Ир╕▓р╕Б FPGA #2 тЬЕ
- L1 р╕Хр╕┤р╕Ф = FPGA #1 р╕гр╕▒р╕Ър╕Др╕│р╕кр╕│р╣Ар╕гр╣Зр╕И тЬЕ
- L2 р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ = FPGA #1 р╕гр╕▒р╕Ъ serial clock тЬЕ

---

### **Step 2: р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Хр╕▓р╕бр╕кр╕Цр╕▓р╕Щр╕░ LED**

#### **р╕Бр╕гр╕Ур╕╡ 1: L3 р╣Др╕бр╣Ир╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ**
```
р╕кр╕▓р╣Ар╕лр╕Хр╕╕: FPGA #1 р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

р╣Бр╕Бр╣Йр╣Др╕В:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ upload fpga1_top_serial.bit р╣Бр╕ер╣Йр╕з
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ power supply FPGA #1
3. р╕Бр╕Ф reset button
4. Upload р╣Гр╕лр╕бр╣Ир╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
```

#### **р╕Бр╕гр╕Ур╕╡ 2: L3 р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ р╣Бр╕Хр╣И L0-L2 р╕Фр╕▒р╕Ър╕лр╕бр╕Ф**
```
р╕кр╕▓р╣Ар╕лр╕Хр╕╕: FPGA #1 р╕Чр╕│р╕Зр╕▓р╕Щ р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕кр╕▒р╕Нр╕Нр╕▓р╕Ур╕Ир╕▓р╕Б FPGA #2

р╣Бр╕Бр╣Йр╣Др╕В:
1. р╣Ар╕Кр╣Зр╕Др╕кр╕▓р╕в P5, P7, P9 (TX р╕Ир╕▓р╕Б FPGA #2)
2. р╣Ар╕Кр╣Зр╕Д GND р╕Хр╣Ир╕нр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Ър╕нр╕гр╣Мр╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
3. р╣Гр╕Кр╣Й multimeter р╕Хр╕гр╕зр╕И continuity
4. р╕Хр╕гр╕зр╕Ир╕зр╣Ир╕▓ FPGA #2 р╕кр╣Ир╕Зр╕Ир╕гр╕┤р╕Зр╣Др╕лр╕б:
   - р╕Бр╕Ф Enter р╕лр╕ер╕▒р╕Зр╕Юр╕┤р╕бр╕Юр╣Мр╕Др╕гр╕Ъ 5 р╕Хр╕▒р╕з
   - P15 (FPGA #2) р╕Хр╣Йр╕нр╕Зр╕Хр╕┤р╕Ф 1 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡
```

#### **р╕Бр╕гр╕Ур╕╡ 3: L0-L1 р╕Хр╕┤р╕Ф р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╕бр╕╡р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з/р╣Ар╕лр╕ер╕╖р╕нр╕З**
```
р╕кр╕▓р╣Ар╕лр╕Хр╕╕: FPGA #1 р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕ер╕▒р╕Ъ

р╣Бр╕Бр╣Йр╣Др╕В:
1. р╣Ар╕Кр╣Зр╕Др╕кр╕▓р╕в P11, P14, P16, P21 (TX р╕Ир╕▓р╕Б FPGA #1)
2. р╕Хр╕гр╕зр╕Ир╕зр╣Ир╕▓ FPGA #1 р╕кр╣Ир╕Зр╕Бр╕ер╕▒р╕Ър╣Др╕лр╕б:
   - р╕зр╕▒р╕Ф P11 (TX Data) р╕Фр╣Йр╕зр╕в multimeter
   - р╕лр╕гр╕╖р╕нр╕Хр╣Ир╕н LED р╕Чр╕╡р╣И P14 (TX Clock)
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ word_rom р╕зр╣Ир╕▓р╕бр╕╡р╕Др╕│р╕Чр╕╡р╣Ир╕Юр╕┤р╕бр╕Юр╣Мр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
```

#### **р╕Бр╕гр╕Ур╕╡ 4: LED р╕Чр╕╕р╕Бр╕Хр╕▒р╕зр╕Чр╕│р╕Зр╕▓р╕Щ р╣Бр╕Хр╣Ир╕вр╕▒р╕Зр╕кр╕╡р╕бр╣Ир╕зр╕З**
```
р╕кр╕▓р╣Ар╕лр╕Хр╕╕: FPGA #2 р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б FPGA #1

р╣Бр╕Бр╣Йр╣Др╕В:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ FSM state р╕Вр╕нр╕З FPGA #2
2. р╣Ар╕Кр╣Зр╕Д timeout counter (5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡)
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ display_renderer
4. р╕ер╕нр╕З re-synthesize FPGA #2
```

---

### **Step 3: р╕Чр╕Фр╕кр╕нр╕Ър╕Др╕│р╕Чр╕╡р╣Ир╕гр╕╣р╣Йр╕Др╕│р╕Хр╕нр╕Ъ**

р╕ер╕нр╕Зр╕Юр╕┤р╕бр╕Юр╣Мр╕Др╕│р╣Ар╕лр╕ер╣Ир╕▓р╕Щр╕╡р╣Й (р╕Хр╣Йр╕нр╕Зр╕бр╕╡р╣Гр╕Щ word_rom):

```
APPLE - р╕Др╕зр╕гр╣Др╕Фр╣Йр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕▒р╣Йр╕З 5 р╕Хр╕▒р╕з
GRAPE - р╕Др╕зр╕гр╣Др╕Фр╣Йр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕▒р╣Йр╕З 5 р╕Хр╕▒р╕з
LEMON - р╕Др╕зр╕гр╣Др╕Фр╣Йр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕▒р╣Йр╕З 5 р╕Хр╕▒р╕з
```

р╕Цр╣Йр╕▓р╕Юр╕┤р╕бр╕Юр╣Мр╕Хр╕гр╕Зр╣Бр╕ер╣Йр╕зр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Ар╕Вр╕╡р╕вр╕з = FPGA #1 р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Хр╕гр╕зр╕Ир╕Др╕│

---

### **Step 4: р╕Чр╕Фр╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в Test Mode**

р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Бр╕ер╕▒р╕Ър╣Ар╕Ыр╣Зр╕Щ TEST_MODE = true р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з:

```vhdl
// File: fpga2_top_3bit_rgb_Version2.vhd
constant TEST_MODE : boolean := true;
```

Synthesize р╣Бр╕ер╕░р╕Чр╕Фр╕кр╕нр╕Ъ:
- р╕Юр╕┤р╕бр╕Юр╣М 5 р╕Хр╕▒р╕з тЖТ р╕Бр╕Ф Enter
- р╕Хр╣Йр╕нр╕Зр╣Ар╕лр╣Зр╕Щ 5 р╕кр╕╡ (р╣Ар╕Вр╕╡р╕вр╕з, р╣Ар╕лр╕ер╕╖р╕нр╕З, р╕бр╣Ир╕зр╕З, р╕Вр╕▓р╕з, р╕Яр╣Йр╕▓)

р╕Цр╣Йр╕▓ Test Mode р╕Чр╕│р╕Зр╕▓р╕Щ = р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Бр╕▓р╕гр╕кр╕╖р╣Ир╕нр╕кр╕▓р╕гр╕Бр╕▒р╕Ъ FPGA #1

---

## ЁЯФз **Quick Fix:**

### **р╣Бр╕Бр╣Йр╣Др╕Вр╕Фр╣Ир╕зр╕Щр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф:**

1. **р╣Ар╕Кр╣Зр╕Д GND:**
   ```
   р╣Гр╕Кр╣Й multimeter р╕зр╕▒р╕Ф GND р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Ър╕нр╕гр╣Мр╕Ф
   р╕Хр╣Йр╕нр╕Зр╕бр╕╡ continuity (beep)
   р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡ = р╕Хр╣Ир╕н GND р╣Гр╕лр╕бр╣И
   ```

2. **р╣Ар╕Кр╣Зр╕Д Power:**
   ```
   FPGA #1: LED power р╕Хр╕┤р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?
   FPGA #2: LED L0 р╕Хр╕┤р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?
   ```

3. **Re-upload р╕Чр╕▒р╣Йр╕З 2 р╕Ър╕нр╕гр╣Мр╕Ф:**
   ```
   1. Upload FPGA #1 р╕Бр╣Ир╕нр╕Щ
   2. р╣Ар╕Кр╣Зр╕Д L3 р╕Хр╣Йр╕нр╕Зр╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ
   3. Upload FPGA #2
   4. р╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕лр╕бр╣И
   ```

---

## ЁЯОп **р╕Др╕│р╕Цр╕▓р╕бр╕кр╕│р╕Др╕▒р╕Нр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Хр╕нр╕Ъ:**

р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╣Ар╕лр╕ер╣Ир╕▓р╕Щр╕╡р╣Й:

1. **FPGA #1 LED L3 р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ър╕лр╕гр╕╖р╕нр╣Др╕бр╣И?**
   - [ ] р╣Гр╕Кр╣И р╕Бр╕гр╕░р╕Юр╕гр╕┤р╕Ъ
   - [ ] р╣Др╕бр╣И р╕Фр╕▒р╕Ъ

2. **р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Ф Enter, FPGA #1 LED L0-L1 р╕Хр╕┤р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?**
   - [ ] L0 р╕Хр╕┤р╕Ф
   - [ ] L1 р╕Хр╕┤р╕Ф
   - [ ] р╕Чр╕▒р╣Йр╕Зр╕Др╕╣р╣Ир╕Фр╕▒р╕Ъ

3. **GND р╕Хр╣Ир╕нр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Ър╕нр╕гр╣Мр╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?**
   - [ ] р╣Гр╕Кр╣И р╕Хр╣Ир╕нр╣Бр╕ер╣Йр╕з
   - [ ] р╣Др╕бр╣Ир╣Бр╕Щр╣Ир╣Гр╕И
   - [ ] р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Хр╣Ир╕н

4. **р╕Др╕│р╕Чр╕╡р╣Ир╕Юр╕┤р╕бр╕Юр╣Мр╕Др╕╖р╕нр╕нр╕░р╣Др╕г?**
   - р╕Др╕│: __________
   - р╕бр╕╡р╣Гр╕Щ word_rom р╕лр╕гр╕╖р╕нр╣Др╕бр╣И: [ ] р╣Гр╕Кр╣И [ ] р╣Др╕бр╣Ир╕гр╕╣р╣Й

5. **р╣Гр╕Кр╣Й Ribbon Cable р╕лр╕гр╕╖р╕н Jumper Wires?**
   - [ ] Ribbon Cable
   - [ ] Jumper Wires

---

## ЁЯУК **Expected vs Actual:**

### **Expected (р╕Др╕зр╕гр╣Ар╕Ыр╣Зр╕Щ):**
```
р╕Юр╕┤р╕бр╕Юр╣М: APPLE
р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: ЁЯЯвЁЯЯвЁЯЯвЁЯЯвЁЯЯв (р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф)

р╕Юр╕┤р╕бр╕Юр╣М: HELLO (р╕Цр╣Йр╕▓р╕Др╕│р╕Хр╕нр╕Ър╕Др╕╖р╕н APPLE)
р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: ЁЯЯгЁЯЯбЁЯЯгЁЯЯгЁЯЯг (р╣Ар╕лр╕ер╕╖р╕нр╕Зр╕Чр╕╡р╣И L, р╣Ар╕Чр╕▓р╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕н)
```

### **Actual (р╕Чр╕╡р╣Ир╣Ар╕лр╣Зр╕Щ):**
```
р╕Юр╕┤р╕бр╕Юр╣М: _____ (р╕Др╕│р╣Гр╕Фр╕Бр╣Зр╣Др╕Фр╣Й)
р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: ЁЯЯгЁЯЯгЁЯЯгЁЯЯгЁЯЯг (р╕бр╣Ир╕зр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф)
```

**р╕кр╕гр╕╕р╕Ы:** FPGA #1 р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е р╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕кр╣Ир╕Зр╕Бр╕ер╕▒р╕Ъ

---

## ЁЯПЖ **р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Чр╕│р╕Хр╣Ир╕н:**

1. тЬЕ р╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕б 5 р╕Вр╣Йр╕нр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ
2. тЬЕ р╕Ър╕нр╕Бр╕кр╕Цр╕▓р╕Щр╕░ LED FPGA #1 р╕Чр╕▒р╣Йр╕З 4 р╕Фр╕зр╕З
3. тЬЕ р╕ер╕нр╕З Test Mode (р╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕вр╕Бр╕Ыр╕▒р╕Нр╕лр╕▓)
4. тЬЕ р╣Ар╕Кр╣Зр╕Д GND р╕Фр╣Йр╕зр╕в multimeter

р╣Бр╕ер╣Йр╕зр╣Ар╕гр╕▓р╕Ир╕░р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓р╕Хр╣Ир╕нр╣Др╕Фр╣Йр╣Бр╕бр╣Ир╕Щр╕вр╕│р╕Др╕гр╕▒р╕Ъ! ЁЯШК
